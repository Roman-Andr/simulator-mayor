plugins {
    id("com.github.johnrengelman.shadow")
}

dependencies {
    compileOnly("ru.cristalix.core:microservice:1.0.12-3")
    compileOnly("me.func:service-api:2.0.0-SNAPSHOT")

    implementation(project(":protocol"))

    implementation("org.mongodb:mongodb-driver-async:3.7.1")
    implementation("org.mongodb:mongodb-driver:3.7.1")

    implementation("me.func:booster-api:live-SNAPSHOT")
    implementation("org.jetbrains.kotlinx:kotlinx-coroutines-jdk8:1.6.0")

    implementation("org.iq80.leveldb:leveldb:0.12")

    implementation("org.json:json:20211205")
    implementation('io.netty:netty-all:4.1.84.Final')
    implementation("com.google.code.gson:gson:2.9.0")
    implementation('it.unimi.dsi:fastutil:8.5.11')
}

tasks {
    build { dependsOn(shadowJar) }
    jar { enabled = false }
    shadowJar {
        archiveFileName.set("construction-service.jar")
        configurations = [project.configurations.compileClasspath]
        manifest {
            attributes["Main-Class"] = "me.slavita.construction.service.MainKt"
            attributes["Multi-Release"] = true
        }
    }
}
